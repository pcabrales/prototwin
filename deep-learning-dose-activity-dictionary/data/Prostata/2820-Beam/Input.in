# Demonstrates scoring in a DICOM file.
# You must unzip DICOM_Box.zip before you run this example.
# Reads in and displays a simple test DICOM that represents
# a box of water in air.
# Can optionally display patient from XiO input file.
# If Graphics is enabled, the display writes very slowly to the screen.
# This will be improved in an upcoming new release.
# Until then, one useful trick is that if you iconize the graphics window,
# then un-inconize it when drawing is done, the drawing will go much faster.

includeFile = HUtoMaterialSchneider.txt
includeFile = Oxygen-18.txt

s:Ge/World/Material    = "Vacuum"
d:Ge/World/HLX         = 2.0 m
d:Ge/World/HLY         = 2.0 m
d:Ge/World/HLZ         = 2.0 m
b:Ge/World/Invisible   = "TRUE"

s:Ge/Patient/Parent   = "World"
s:Ge/Patient/Material = "G4_WATER"
d:Ge/Patient/TransX   = 0. m
d:Ge/Patient/TransY   = 0. m
d:Ge/Patient/TransZ   = 0. m
d:Ge/Patient/RotX     = 0. deg
d:Ge/Patient/RotY     = 0. deg
d:Ge/Patient/RotZ     = 0. deg



s:Ge/BeamPosition/Parent = "World"
s:Ge/BeamPosition/Type = "Group"
d:Ge/BeamPosition/TransX = 170 mm
d:Ge/BeamPosition/TransY = -10 mm
d:Ge/BeamPosition/TransZ = -10 mm
d:Ge/BeamPosition/RotX = 0. deg
d:Ge/BeamPosition/RotY = 90. deg
d:Ge/BeamPosition/RotZ = 0. deg


# Specify which slices to show.
# Comment this out or set to zero to show all slices.
# Set to -1 to show only center slice.
# Set to -2 to show first, center and last slice.
#iv:Ge/Patient/ShowSpecificSlicesX = 1 -2
#iv:Ge/Patient/ShowSpecificSlicesY = 1 -2
iv:Ge/Patient/ShowSpecificSlicesZ = 1 -2

# Can read either DICOM or XiO input files.
# To change input format, change which
# Ge/Patient/Type file is commented out below.

# Additional needed for DICOM input
s:Ge/Patient/Type           = "TsDicomPatient"
s:Ge/Patient/DicomDirectory = "../CT"

s:Ge/Score/Type     = "TsBox"
b:Ge/Score/IsParallel = "TRUE"
s:Ge/Score/Parent   = "Patient"
d:Ge/Score/HLX      = 75 mm
d:Ge/Score/HLY      = 60 mm
d:Ge/Score/HLZ      = 70 mm
d:Ge/Score/TransX   = -15. mm
d:Ge/Score/TransY   = 0. mm
d:Ge/Score/TransZ   = -10. mm

s:Sc/DoseOnCTGrid/Quantity                  = "DoseToMedium"
s:Sc/DoseOnCTGrid/Component                 = "Score"
b:Sc/DoseOnCTGrid/OutputToConsole           = "False"
s:Sc/DoseOnCTGrid/IfOutputFileAlreadyExists = "Overwrite"
s:Sc/DoseOnCTGrid/OutputType                = "binary"
i:Sc/DoseOnCTGrid/XBins  = 150
i:Sc/DoseOnCTGrid/YBins  = 60
i:Sc/DoseOnCTGrid/ZBins  = 70

s:Sc/O15OnCTGrid/Quantity                  = "MyScoreO16O15"
s:Sc/O15OnCTGrid/Component                 = "Score"
b:Sc/O15OnCTGrid/OutputToConsole           = "False"
s:Sc/O15OnCTGrid/IfOutputFileAlreadyExists = "Overwrite"
s:Sc/O15OnCTGrid/OutputType                = "Binary"
i:Sc/O15OnCTGrid/XBins  = 150
i:Sc/O15OnCTGrid/YBins  = 60
i:Sc/O15OnCTGrid/ZBins  = 70
sv:Sc/O15OnCTGrid/OnlyIncludeParticlesNamed     = 1 "proton" 

s:Sc/C11oOnCTGrid/Quantity                  = "MyScoreO16C11"
s:Sc/C11oOnCTGrid/Component                 = "Score"
b:Sc/C11oOnCTGrid/OutputToConsole           = "False"
s:Sc/C11oOnCTGrid/IfOutputFileAlreadyExists = "Overwrite"
s:Sc/C11oOnCTGrid/OutputType                = "Binary"
i:Sc/C11oOnCTGrid/XBins  = 150
i:Sc/C11oOnCTGrid/YBins  = 60
i:Sc/C11oOnCTGrid/ZBins  = 70
sv:Sc/C11oOnCTGrid/OnlyIncludeParticlesNamed     = 1 "proton" 


s:Sc/N13OnCTGrid/Quantity                  = "MyScoreO16N13"
s:Sc/N13OnCTGrid/Component                 = "Score"
b:Sc/N13OnCTGrid/OutputToConsole           = "False"
s:Sc/N13OnCTGrid/IfOutputFileAlreadyExists = "Overwrite"
s:Sc/N13OnCTGrid/OutputType                = "Binary"
i:Sc/N13OnCTGrid/XBins  = 150
i:Sc/N13OnCTGrid/YBins  = 60
i:Sc/N13OnCTGrid/ZBins  = 70
sv:Sc/N13OnCTGrid/OnlyIncludeParticlesNamed     = 1 "proton" 


s:Sc/C11cnCTGrid/Quantity                  = "MyScoreC12C11"
s:Sc/C11cnCTGrid/Component                 = "Score"
b:Sc/C11cnCTGrid/OutputToConsole           = "False"
s:Sc/C11cnCTGrid/IfOutputFileAlreadyExists = "Overwrite"
s:Sc/C11cnCTGrid/OutputType                = "Binary"
i:Sc/C11cnCTGrid/XBins  = 150
i:Sc/C11cnCTGrid/YBins  = 60
i:Sc/C11cnCTGrid/ZBins  = 70
sv:Sc/C11cnCTGrid/OnlyIncludeParticlesNamed     = 1 "proton" 


s:Sc/F18OnCTGrid/Quantity                  = "MyScoreO18F18"
s:Sc/F18OnCTGrid/Component                 = "Score"
b:Sc/F18OnCTGrid/OutputToConsole           = "False"
s:Sc/F18OnCTGrid/IfOutputFileAlreadyExists = "Overwrite"
s:Sc/F18OnCTGrid/OutputType                = "Binary"
i:Sc/F18OnCTGrid/XBins  = 150
i:Sc/F18OnCTGrid/YBins  = 60
i:Sc/F18OnCTGrid/ZBins  = 70
sv:Sc/F18OnCTGrid/OnlyIncludeParticlesNamed     = 1 "proton" 

s:So/Example/Type                     = "Beam"
s:So/Example/Component                = "BeamPosition"
s:So/Example/BeamParticle             = "proton"
d:So/Example/BeamEnergy               = 155161 keV
u:So/Example/BeamEnergySpread         = 0.0
s:So/Example/BeamPositionDistribution = "Gaussian"
s:So/Example/BeamPositionCutoffShape  = "Ellipse"
d:So/Example/BeamPositionCutoffX      = 10. cm
d:So/Example/BeamPositionCutoffY      = 10. cm
d:So/Example/BeamPositionSpreadX      = 0.282 cm
d:So/Example/BeamPositionSpreadY      = 0.261 cm
s:So/Example/BeamAngularDistribution  = "Gaussian"
d:So/Example/BeamAngularCutoffX       = 90. deg
d:So/Example/BeamAngularCutoffY       = 90. deg
d:So/Example/BeamAngularSpreadX       = 0.0032 rad
d:So/Example/BeamAngularSpreadY       = 0.0032 rad
i:So/Example/NumberOfHistoriesInRun   = 100000


# Uncomment to activate graphics
#s:Gr/ViewA/Type           = "OpenGL"
sv:Gr/ViewA/VisibleWorlds = 1 "All"
i:Gr/ViewA/WindowSizeX    = 900
i:Gr/ViewA/WindowSizeY    = 900
d:Gr/ViewA/Theta          = 70 deg
d:Gr/ViewA/Phi            = 10 deg

# Extra graphics options to handle complex voxel geometries
i:Gr/ShowOnlyOutlineIfVoxelCountExceeds = 210000000

i:Ts/ShowHistoryCountAtInterval = 100000

i:Ts/NumberOfThreads = 1 # defaults to 1

i:Ts/MaximumNumberOfDetailedErrorReports = 1




b:Ts/PauseBeforeQuit = "False"
